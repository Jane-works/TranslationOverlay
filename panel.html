<div class="translation-overlay-panel">
  <h3>翻译插件设置</h3>
  <label>API 地址:<br>
    <input id="overlay-api-url" type="text" style="width:100%">
  </label>
  <label>API Key:<br>
    <input id="overlay-api-key" type="password" style="width:100%">
  </label>
  <label>模型名称:<br>
    <input id="overlay-model" type="text" style="width:100%">
  </label>
  <label>目标语言:<br>
    <input id="overlay-lang" type="text" value="zh" style="width:100%">
  </label>
  <button id="overlay-save">保存配置</button>
  <div id="overlay-panel-msg" style="margin-top:5px;font-size:12px;color:#0f0"></div>
</div>

<script type="module">
  import { loadState, saveState } from "./state.js";

  const s = loadState();
  document.getElementById("overlay-api-url").value = s.apiUrl;
  document.getElementById("overlay-api-key").value = s.apiKey;
  document.getElementById("overlay-model").value = s.modelName;
  document.getElementById("overlay-lang").value = s.targetLang;

  document.getElementById("overlay-save").onclick = () => {
    saveState({
      apiUrl: document.getElementById("overlay-api-url").value.trim(),
      apiKey: document.getElementById("overlay-api-key").value.trim(),
      modelName: document.getElementById("overlay-model").value.trim(),
      targetLang: document.getElementById("overlay-lang").value.trim()
    });
    document.getElementById("overlay-panel-msg").textContent = "配置已保存 ✔";
  };
</script>
